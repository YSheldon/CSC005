---
layout: post
title: Researchers Bypass AMD’s SEV Virtual Machine Encryption
date: 2018-05-26 07:02:48
tourl: https://www.bleepingcomputer.com/news/security/researchers-bypass-amd-s-sev-virtual-machine-encryption/
tags: [attack]
---
æ¥è‡ªå¾·å›½æ…•å°¼é»‘çš„FrunHoFERåº”ç”¨ä¸é›†æˆå®‰å…¨ç ”ç©¶æ‰€çš„å››åç ”ç©¶äººå‘˜æœ¬å‘¨å‘è¡¨äº†ä¸€ä»½ç ”ç©¶è®ºæ–‡ï¼Œè¯¦ç»†ä»‹ç»äº†ä¸€ç§æ¢å¤æ•°æ®çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šå¸¸ç”±AMDçš„å®‰å…¨åŠ å¯†è™šæ‹ŸåŒ–ï¼ˆSEVï¼‰åŠ å¯†ï¼Œè¯¥å®‰å…¨æœºåˆ¶è®¾è®¡ç”¨äºåŠ å¯†Dã€‚ATMçš„è™šæ‹Ÿæœºè¿è¡Œåœ¨AMD CPUçš„æœåŠ¡å™¨ä¸Šã€‚ç ”ç©¶å°ç»„ç§°ä»–ä»¬çš„æ”»å‡»è¢«ç§°ä¸ºåˆ‡æ–­ï¼Œå®ƒèƒ½å¤Ÿä»ä¸VMæ”»å‡»çš„VMæœåŠ¡å™¨ä¸Šè¿è¡Œçš„å®¢æˆ·VMSæ¢å¤æ˜æ–‡å†…å­˜æ•°æ®ã€‚æ–­ç»ä¹Ÿä¸éœ€è¦ç‰©ç†è®¿é—®æˆ–æ¶æ„åˆä½œã€‚DEå­˜åœ¨äºè¢«æ”»å‡»çš„VMä¸Šï¼Œå¯ä»¥é€šè¿‡å‘Apacheã€NGiNXæˆ–OpenSSHç­‰åº”ç”¨ç¨‹åºå‘é€ç½‘ç»œè¯·æ±‚æ¥è¿œç¨‹æ‰§è¡Œã€‚â€œé€šè¿‡åå¤å‘æœåŠ¡å‘é€ç›¸åŒèµ„æºçš„è¯·æ±‚ï¼ŒåŒæ—¶é‡æ–°æ˜ å°„æ‰€æ ‡è¯†çš„å†…å­˜é¡µï¼Œæˆ‘ä»¬æå–PLAä¸­çš„æ‰€æœ‰VMå†…å­˜ã€‚ç ”ç©¶äººå‘˜åœ¨ä»–ä»¬çš„è®ºæ–‡ä¸­ç§°ï¼Œâ€œæ”»å‡»æ˜¯æˆåŠŸçš„ï¼Œå› ä¸ºVMå°†ä¸€äº›æ•°æ®å­˜å‚¨åœ¨ä¸»RAMå†…å­˜ä¸­ï¼Œâ€ä¸»é¡µçš„é¡µé¢åŠ å¯†æ²¡æœ‰å®Œæ•´æ€§ä¿æŠ¤ã€‚â€œè¿™å…è®¸æ”»å‡»è€…ç»˜åˆ¶æ•´ä¸ªå†…å­˜ï¼Œç„¶åè¯·æ±‚ä½¿ç”¨çš„éƒ¨åˆ†ã€‚å…¶ä»–é™„è¿‘çš„è™šæ‹Ÿæœºï¼Œæ”»å‡»å®¢æˆ·VMä¸èƒ½è®¿é—®ï¼Œæ›´ä¸ç”¨è¯´æ˜æ–‡äº†ã€‚åœ¨ä»–ä»¬æ”»å‡»çš„æµ‹è¯•ä¸­ï¼Œç ”ç©¶äººå‘˜è¯´ä»–ä»¬èƒ½å¤Ÿæ£€ç´¢æµ‹è¯•æœåŠ¡å™¨çš„æ•´ä¸ª2GBå†…å­˜ï¼ŒåŒ…æ‹¬æ¥è‡ªå®¢æˆ·VMçš„æ•°æ®ã€‚ç ”ç©¶äººå‘˜é€šè¿‡è½°å‡»APè·å¾—äº†æœ€å¥½çš„ç»“æœã€‚AChEå’ŒNGIXé‡å¤è¯·æ±‚ï¼Œä»¥79.4 kb/sçš„é€Ÿåº¦æ£€ç´¢å†…å­˜æ•°æ®ï¼Œè€ŒOpenSSHçš„æ”»å‡»é€Ÿåº¦è¾ƒæ…¢ï¼Œä»…åœ¨41.6 kb/sçš„èŒƒå›´å†…æ£€ç´¢æ•°æ®ã€‚ç ”ç©¶å°ç»„è¿˜è¡¥å……è¯´ï¼Œä»–ä»¬çš„æ–­ç»æ”»å‡»ä¸ä¼šè¢«æœåŠ¡å™¨æ³¨é”€ï¼Œç”šè‡³å¯ä»¥æ£€ç´¢å†…å­˜æ•°æ®ã€‚åœ¨è‘¡è„ç‰™æ³¢å°”å›¾ä¸¾è¡Œçš„ç¬¬åä¸€å±Šæ¬§æ´²ç³»ç»Ÿå®‰å…¨ç ”è®¨ä¼šä¸Šï¼Œè¯¥å°ç»„çš„å·¥ä½œåœ¨ä¸Šä¸ªæœˆè¿›è¡Œäº†å±•ç¤ºã€‚
Four researchers from the Fraunhofer Institute for Applied and Integrated Safety in Munich, Germany have published a research paper this week detailing a method of recovering data that is normally encrypted by AMD's Secure Encrypted Virtualization (SEV), a safety mechanism designed to encrypt the data of virtual machines running on servers with AMD CPUs.The research team says their attack, which they named SEVered, is capable of recovering plaintext memory data from guest VMs running on the same server as the VM that's under attack.SEVered also doesn't require physical access or malicious code to be present on the attacked VM and can be carried out remotely by sending network requests to applications such as Apache, nginx, or OpenSSH."By repeatedly sending requests for the same resource to the service while re-mapping the identified memory pages, we extract all the VM’s memory in plaintext," researchers said in their paper, entitled "The attack is successful because the VM stores some of its data inside the main RAM memory, and "the page-wise encryption of main memory lacks integrity protection." This allows an attacker to map out the entire memory and then requests parts used by other nearby VMs, of which the attacked guest VM shouldn't be able to access, let alone in plaintext.During tests of their attack, researchers said they were able to retrieve a test server's entire 2GB memory, including data from a guest VM.Researchers achieved the best results by bombarding Apache and nginx with repeated requests, retrieving memory data at a speed of 79.4 KB/sec, while an attack on OpenSSH was slower, retrieving data at only 41.6 KB/sec.The research team also added that their SEVered attack isn't hindered by maxed out servers, being able to retrieve memory data even when the targeted VM is under a high load.The team's work was showcased last month at the 11th European Workshop on Systems Security, held in Porto, Portugal.For their test rig, researchers used an 