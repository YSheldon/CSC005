---
layout: post
title: New Spectre variant 4: Our patches cause up to 8% performance hit, warns Intel
date: 2018-05-22 11:26:12
tourl: https://www.zdnet.com/article/new-spectre-variant-4-our-patches-cause-up-to-8-performance-hit-warns-intel/
tags: [attack]
---
è‹±ç‰¹å°”å³å°†æ¨å‡ºçš„å¾®ç æ›´æ–°æ¥è§£å†³è‹±ç‰¹å°”çš„é¢„æœŸé—®é¢˜ï¼Œè¿™ä¸€æ¬¡é€šè¿‡ç¡®è®¤å‰é¢çš„ç»„åˆè½¯ä»¶å’Œå›ºä»¶å¾®ç æ›´æ–°ï¼Œä»¥å‡è½»å¹½çµå˜ç§4å°†å¯¼è‡´é«˜è¾¾ç™¾åˆ†ä¹‹å…«çš„æ€§èƒ½å½±å“ã€‚å¦‚æœå¯ç”¨ï¼Œæˆ‘ä»¬å·²ç»è§‚å¯Ÿåˆ°äº†å¤§çº¦2014åˆ°ç™¾åˆ†ä¹‹å…«çš„æ€§èƒ½å½±å“ï¼ŒåŸºäºSysMek 2014 SEå’Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨æµ‹è¯•ç³»ç»Ÿä¸Šçš„SPECæ•´æ•°é€Ÿç‡ç­‰åŸºå‡†ï¼Œâ€œSimpleå˜ä½“â€æ˜¯è‹±ç‰¹å°”è°ƒç”¨å‘ç°çš„ä¸€ä¸ªæ–°çš„å­ç±»æŠ•æœºæ‰§è¡Œæ”»å‡»ã€‚SimeLeæ”»å‡»äº†ä¸€ä¸ªæŠ•æœºå•†åº—æ—è·¯ï¼Œå¹¶ç§°å®ƒçš„ç¼“è§£æŠ•æœºå•†åº—æ—è·¯ç¦ç”¨ï¼ˆSSBDï¼‰ï¼Œå®ƒä½œä¸ºå¾®ç æ›´æ–°äº¤ä»˜ç»™æ“ä½œç³»ç»Ÿä¾›åº”å•†ã€è®¾å¤‡åˆ¶é€ å•†å’Œå…¶ä»–ç”Ÿæ€ç³»ç»Ÿåˆä½œä¼™ä¼´ã€‚ä¸€æœˆï¼Œè‹±ç‰¹å°”åœ¨å…¶é€šä¿¡Aä¸­ä¸å¤ªæ„¿æ„å‡ºç°ã€‚ç”±äºå…¶å¯¹Simpleå˜ä½“2çš„ç¼“è§£æ‰€é€ æˆçš„æ€§èƒ½å½±å“ï¼Œåªè¯´å®ƒå°†æ ¹æ®å·¥ä½œé‡è€Œå˜åŒ–ã€‚ç„¶è€Œï¼Œè°·æ­Œå‘ç°å…¶å½±å“æ˜¯æ˜¾è‘—çš„ï¼Œè€Œè‹±ç‰¹å°”ç›®å‰æµ‹è¯•SSBDå½±å“çš„åŸºå‡†æ˜¯åœ¨æœªæŒ‡å®šçš„è‹±ç‰¹å°”å‚è€ƒç¡¬ä»¶å’Œç¬¬å…«ä»£è‹±ç‰¹å°”æ ¸å¿ƒæ¡Œé¢å¾®å¤„ç†å™¨ä¸Šè¿è¡Œçš„ã€‚åœ¨SysMeX 2014 SEæ€»åˆ†ä¸­çš„æ€§èƒ½å½±å“ä¸ºç™¾åˆ†ä¹‹å››ï¼Œåœ¨SputtInRealTaseBase2006ï¼ˆnæ‹·è´ï¼‰æ€»åˆ†ä¸‹ä¸ºç™¾åˆ†ä¹‹äºŒï¼Œåœ¨SputtIn ReaTyBase2006ï¼ˆ1æ‹·è´ï¼‰æ€»åˆ†ä¸­ä¸ºç™¾åˆ†ä¹‹å…«ã€‚åœ¨è¿™äº›åŸºå‡†ä¸‹ï¼Œå¯¹å¤©æ¹–æ¶æ„Xeonå¤„ç†å™¨çš„å½±å“æ˜¯ç›¸ä¼¼çš„ã€‚ä½†ä¸è‹±ç‰¹å°”çš„å˜ç§2çš„æ›´æ–°ä¸åŒï¼ŒSimpleå˜ä½“4çš„æ›´æ–°è¢«è§†ä¸ºâ€œé€‚åº¦â€çš„ä¸¥é‡é—®é¢˜ï¼Œå¹¶ä¸”ä¸Simpleå˜ä½“1å¯†åˆ‡ç›¸å…³ï¼Œå°†æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹è®¾ç½®ä¸ºOFFã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œå¯¹æ€§èƒ½æ²¡æœ‰å½±å“ã€‚â€â€œæˆ‘ä»¬å·²ç»å°†betaç‰ˆæœ¬4çš„å¾®ä»£ç æ›´æ–°äº¤ä»˜ç»™OEMç³»ç»Ÿåˆ¶é€ å•†å’Œç³»ç»Ÿè½¯ä»¶ä¾›åº”å•†ï¼Œæˆ‘ä»¬é¢„è®¡å®ƒå°†åœ¨æœªæ¥å‡ å‘¨å†…å‘å¸ƒåˆ°ç”Ÿäº§BIOSå’Œè½¯ä»¶æ›´æ–°ä¸­ï¼Œâ€å¡ä¼¯ç‰¹æ£®å†™é“ï¼Œâ€œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ç§ç¼“è§£å°†è¢«è®¾ç½®ä¸ºå…³é—­ã€‚ä¸å®¢æˆ·é€‰æ‹©æ˜¯å¦å¯ç”¨å®ƒã€‚æˆ‘ä»¬é¢„è®¡å¤§å¤šæ•°è¡Œä¸šè½¯ä»¶åˆä½œä¼™ä¼´ä¹Ÿä¼šä½¿ç”¨é»˜è®¤OFFé€‰é¡¹ã€‚åœ¨è¿™ç§é…ç½®ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰è§‚å¯Ÿåˆ°æ€§èƒ½çš„å½±å“ã€‚â€œæ­£å¦‚è‹±ç‰¹å°”åœ¨å…¶å’¨è¯¢ä¸­æŒ‡å‡ºçš„é‚£æ ·ï¼Œâ€SSBDæä¾›äº†é¢å¤–çš„ä¿æŠ¤ï¼Œä¸ºç³»ç»Ÿè½¯ä»¶æä¾›äº†ä¸€ç§æ‰‹æ®µï¼Œä»¥å®Œå…¨æŠ‘åˆ¶æŠ•æœºå•†åº—æ—è·¯ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œâ€œæ¢å¥è¯è¯´ï¼Œå¦‚æœæ¶ˆè´¹è€…å’ŒOEMæƒ³è¦ä»–ä»¬çš„ã€‚ç¡¬ä»¶è¦æ ¼å¤–å®‰å…¨ï¼Œä»–ä»¬å¯ä»¥ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·æ¥é€‰æ‹©è¿™ä¸ªé€‰é¡¹ã€‚è‹±ç‰¹å°”è¿˜æŒ‡å‡ºï¼Œå·²ç»å‘å¸ƒçš„é’ˆå¯¹Simpleå˜ä½“1çš„æµè§ˆå™¨ç¼“è§£ç¡®å®æœ‰åŠ©äºå‡è½»å˜ä½“4ã€‚AMDåŒæ ·å»ºè®®ç¦ç”¨SSBDã€‚æŠ¥å‘Šä¸­å‡ºç°äº†å…«ä¸ªæ–°çš„â€œå¹½çµçº§â€å®‰å…¨CPUæ¼æ´ã€‚ä¸€ä¸ªæ–°çš„å˜å½¢è™«å˜ä½“å¯ä»¥æ­ç¤ºé€šå¸¸ä¸èƒ½è¢«OSå†…æ ¸è®¿é—®çš„å†…å­˜å†…å®¹ã€‚å¾®è½¯å‘å¸ƒæ–°çš„Windowsæ›´æ–°ä»¥è§£å†³å½±å“è‹±ç‰¹å°”èŠ¯ç‰‡çš„å¹½çµå˜ä½“2çš„ç¼ºé™·ã€‚SeDå˜å‹2éœ€è¦å¾®è½¯æœ€æ–°çš„Windows 10ä¿®è¡¥ç¨‹åºçš„SeDå¾®ç æ›´æ–°ã€‚è‹±ç‰¹å°”å°†è¦ä¿®è¡¥çš„å°‘æ•°CPUå®¶æ—ç°åœ¨å°†æ°¸è¿œä¿æŒè„†å¼±ã€‚è‹±ç‰¹å°”åˆ—å‡ºäº†2007åˆ°2011ä¹‹é—´å‘å¸ƒçš„ä¸€ç³»åˆ—CPUï¼Œå®ƒä»¬å°†æ— æ³•æ¥æ”¶å›ºä»¶æ›´æ–°æ¥å¸®åŠ©ä¿æŠ¤ã€‚2018å¹´åˆï¼Œæ¡ˆä»¶æ•°é‡ä»ä¸‰èµ·ä¸Šå‡åˆ°32èµ·ã€‚
Intel's upcoming microcode updates to address the Intel has anticipated questions about performance this time around by confirming upfront that its combined software and firmware microcode updates to mitigate Spectre variant 4 will cause a performance impact of up to eight percent. "If enabled, we've observed a performance impact of approximately two to eight percent based on overall scores for benchmarks like SYSmark® 2014 SE and SPEC integer rate on client and server test systems," Spectre variant 4 is a new subclass of speculative execution attacks discovered by Intel calls the Spectre attack a Speculative Store Bypass and calls its mitigation Speculative Store Bypass Disable (SSBD), which is delivered as a microcode update to operating system vendors, equipment manufacturers, and other ecosystem partners.Intel in January was less forthcoming in its communications about the performance impact caused by its mitigations for Spectre variant 2, only saying it would vary depending on the workload. However, Google found the impact to be significant and Intel's current benchmarking to test the impact of SSBD was run on unspecified Intel reference hardware and an 8th Generation Intel Core desktop microprocessor. The performance impact is four percent in the SYSmark 2014 SE overall score, two percent under the SPECint_rate_base2006 (n copy) total score, and eight percent in the SPECint_rate_base2006 (1 copy) total score. The impact on a Skylake architecture Xeon processor is similar under these benchmarks. But unlike Intel's updates for variant 2, the updates for Spectre variant 4, which is rated as a 'moderate'-severity issue and closely related to Spectre variant 1, will be optional and will by-default set to off. In this state, there is no impact on performance. "We've already delivered the microcode update for variant 4 in beta form to OEM system manufacturers and system software vendors, and we expect it will be released into production BIOS and software updates over the coming weeks," wrote Culbertson."This mitigation will be set to off by default, providing customers the choice of whether to enable it. We expect most industry software partners will likewise use the default-off option. In this configuration, we have observed no performance impact."As Intel notes in its advisory, "SSBD provides additional protection by providing a means for system software to completely inhibit a Speculative Store Bypass from occurring if desired." In other words, if consumers and OEMs want their hardware to be extra secure they can choose that option at the expense of performance. Intel also notes that already-released browser mitigations against Spectre variant 1 do help mitigate variant 4. AMD similarly recommends leaving SSBD disabled. Reports are emerging of eight new 'Spectre-class' security CPU vulnerabilities.A new variant of Spectre can expose the contents of memory that normally can't be accessed by the OS kernel.Microsoft releases new Windows updates to address the Spectre variant 2 flaw affecting Intel chips.AMD has released microcode updates for Spectre variant 2 that require Microsoft's latest Windows 10 patch.A handful of CPU families that Intel was due to patch will now forever remain vulnerable.Intel has listed a range of CPUs released between 2007 and 2011 that will not receive a firmware update to help guard against Spectre-related exploits.Since the beginning of 2018, the number of cases has risen from three to 32.