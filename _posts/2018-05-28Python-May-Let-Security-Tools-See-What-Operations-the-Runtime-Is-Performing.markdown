---
layout: post
title: Python May Let Security Tools See What Operations the Runtime Is Performing
date: 2018-05-28 09:26:15
tourl: https://www.bleepingcomputer.com/news/security/python-may-let-security-tools-see-what-operations-the-runtime-is-performing/
tags: [DNS]
---
Pythonç¼–ç¨‹è¯­è¨€çš„ä¸€ä¸ªæ–°çš„ç‰¹æ€§å»ºè®®å¸Œæœ›åœ¨è¿è¡Œæ—¶æ·»åŠ â€œé€æ˜åº¦â€ï¼Œå½“Pythonå¯èƒ½è¿è¡Œæœ‰æ½œåœ¨å±é™©çš„æ“ä½œæ—¶ï¼Œè®©å®‰å…¨å’Œå®¡è®¡å·¥å…·æŸ¥çœ‹ã€‚åœ¨å½“å‰çš„å½¢å¼ä¸­ï¼ŒPythonä¸å…è®¸å®‰å…¨å·¥å…·æŸ¥çœ‹è¿è¡Œæ—¶çš„æ“ä½œæ˜¯ä»€ä¹ˆã€‚è¡¨æ¼”ã€‚é™¤éå…¶ä¸­ä¸€ä¸ªæ“ä½œäº§ç”Ÿå¯èƒ½å¼•èµ·è­¦æŠ¥çš„ç‰¹å®šé”™è¯¯ï¼Œå¦åˆ™å®‰å…¨å’Œå®¡è®¡å·¥å…·æ˜¯ç›²ç›®çš„ï¼Œæ”»å‡»è€…å¯èƒ½æ­£åœ¨ä½¿ç”¨Pythonåœ¨ç³»ç»Ÿä¸Šæ‰§è¡Œæ¶æ„æ“ä½œã€‚ä½†æ˜¯åœ¨Pythonå¢å¼ºå»ºè®®551ä¸­ï¼Œâ€œæˆ‘ä»¬æå‡ºä¸¤ä¸ªAPIæ›´æ”¹ä»¥å¯ç”¨ï¼šå®¡è®¡æŒ‚é’©å’ŒéªŒè¯å¼€æ”¾æŒ‚é’©ï¼Œâ€œDowerè¯´ã€‚â€ä¸¤ä¸ªéƒ½ä¸æ˜¯é»˜è®¤è®¾ç½®çš„ï¼Œéƒ½éœ€è¦å¯¹å…¥å£ç‚¹äºŒè¿›åˆ¶è¿›è¡Œä¿®æ”¹ä»¥å¯ç”¨ä»»ä½•åŠŸèƒ½ã€‚â€œé¦–å…ˆï¼Œå®¡è®¡æŒ‚é’©APIå°†å¯¹æŸäº›ç±»å‹çš„Pythonæ“ä½œå‘å‡ºè­¦å‘Šæ¶ˆæ¯ã€‚â€è¿™äº›æ“ä½œé€šå¸¸åœ¨Pythonè¿è¡Œæ—¶æˆ–æ ‡å‡†Lå†…ã€‚iBRAREï¼Œå¦‚åŠ¨æ€ä»£ç ç¼–è¯‘ã€æ¨¡å—å¯¼å…¥ã€DNSè§£æï¼Œæˆ–ä½¿ç”¨æŸäº›æ¨¡å—ï¼ˆå¦‚CyTypeï¼‰ï¼Œâ€œDowerè¯´ã€‚â€å®‰å…¨æ€§æˆ–å®¡è®¡å·¥å…·å¯ä»¥ä½¿ç”¨è¿™äº›æ¶ˆæ¯ä½œä¸ºå¯ç–‘æ ‡è®°æ­£åœ¨è¿›è¡Œçš„è­¦å‘Šæ ‡å¿—ï¼Œå¹¶åœ¨å®é™…HARä¹‹å‰æ ‡è®°æˆ–åœæ­¢Pythonè¿›ç¨‹ç»§ç»­ã€‚ç¬¬äºŒä¸ªæ˜¯éªŒè¯çš„OpenHOK APIï¼Œå®ƒæ˜¯è®©Pythonè¿è¡Œæ—¶çŸ¥é“å…è®¸æ‰§è¡Œæˆ–ç¯¡æ”¹å“ªäº›æ–‡ä»¶çš„æœºåˆ¶ã€‚Dowerè§£é‡Šè¯´ï¼šDoweræå‡ºäº†PEP551ï¼Œå»å¹´8æœˆã€‚æ—©æœŸæµ‹è¯•è¡¨æ˜ï¼Œæ·»åŠ è¿™ä¸¤ä¸ªAPIçš„æ€§èƒ½å½±å“æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ï¼Œâ€œç»å¤§å¤šæ•°åŸºå‡†æ˜¾ç¤ºåœ¨1.05xåˆ°1.05xä¹‹é—´è¾ƒæ…¢â€çš„ç»“æœã€‚æœ€åˆçš„è®¡åˆ’æ˜¯ä½¿ç”¨Python 3.7çš„PEP551èˆ¹ï¼Œè®¡åˆ’åœ¨2018å¹´6æœˆä¸­æ—¬å‘å¸ƒï¼Œä½†è¯¥æè®®æ²¡æœ‰MAã€‚ä½œä¸ºPythonçš„ç¬¬äºŒä¸ªä¸»è¦è„šæœ¬å¼•æ“ï¼Œå®ƒè§£å†³äº†â€œå®‰å…¨å…‰å­¦â€çš„é—®é¢˜ï¼Œå³ç¼–ç¨‹å’Œè„šæœ¬è¿è¡Œæ—¶åº”è¯¥æä¾›æœ€å°é€æ˜åº¦ä»¥å¸®åŠ©é˜²æ­¢ä¸è‰¯è¡Œä¸ºã€‚
A new feature proposal for the Python programming language wants to add "transparency" to the runtime and let security and auditing tools view when Python may be running potentially dangerous operations.In its current form, Python does not allow security tools to see what operations the runtime is performing. Unless one of those operations generates particular errors that may raise a sign of alarm, security and auditing tools are blind that an attacker may be using Python to carry out malicious operations on a system.But in Python Enhancement Proposal 551 ("We propose two API changes to enable this: an Audit Hook and Verified Open Hook," Dower says. "Both are not set by default, and both require modifications to the entry point binary to enable any functionality."The first of these, the Audit Hook API, will raise warning messages about certain type of Python operations."These operations are typically deep within the Python runtime or standard library, such as dynamic code compilation, module imports, DNS resolution, or use of certain modules such as ctypes," Dower says.Security or audit tools may use these messages as warning flags that something suspicious is going on, and flag or stop the Python process from continuing, before real harm is done.The second, the Verified Open Hook API, is a mechanism to let the Python runtime know what files it is permitted to execute or tamper with. Dower explains:Dower has proposed PEP-551, last year in August. Early tests suggest the performance impact of adding these two APIs is negligible, "with the vast majority of benchmarks showing between 1.05x faster to 1.05x slower" results.Initial plans were to have PEP-551 ship with Python 3.7, scheduled for release in mid-June 2018, but the proposal did not make the final cut, according to a Python is the second major scripting engine that is addressing the issue of "security optics" —the concept that programming and scripting runtimes should provide minimum transparency to aid prevention of bad behavior. 